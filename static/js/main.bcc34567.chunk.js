(this["webpackJsonpplants-react"]=this["webpackJsonpplants-react"]||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(45),r=a.n(o),i=(a(53),a(1)),l=a(4),s=a.n(l),u=a(8),m=a.n(u),d=a(47),p=function(e){var t=e.data,a=Object(n.useState)([]),o=Object(i.a)(a,2),r=o[0],l=o[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),p=m[0],f=m[1],g=["https://upload.wikimedia.org/wikipedia/commons/7/74/Red_Pencil_Icon.png","https://upload.wikimedia.org/wikipedia/en/4/4a/Commons-logo.svg","https://upload.wikimedia.org/wikipedia/commons/d/df/Wikispecies-logo.svg","https://upload.wikimedia.org/wikipedia/en/9/99/Question_book-new.svg"];return Object(n.useEffect)((function(){l([]),f(!1)}),[t]),c.a.createElement("div",null,r.length>0&&r.map((function(e,t){return c.a.createElement("img",{alt:e,className:"image-fill-parent",key:t,src:e})})),!p&&c.a.createElement("button",{onClick:function(){return f(!0),void s.a.get("https://en.wikipedia.org/w/api.php?action=query&origin=*&format=json&prop=images&titles=".concat(t.scientificName)).then((function(e){var t=Object.values(e.data.query.pages)[0].images;t&&t.forEach((function(e){s.a.get("https://en.wikipedia.org/w/api.php?action=query&origin=*&format=json&titles=".concat(e.title,"&prop=imageinfo&iiprop=url")).then((function(e){var t=Object.values(e.data.query.pages)[0].imageinfo;if(t){var a=t[0].url;a&&!g.includes(a)&&l((function(e){return[].concat(Object(d.a)(e),[t[0].url])}))}}))}))})).catch((function(e){console.error(e)}))}},"Load Additional Images"))},f=function(e){var t=e.data,a=Object(n.useState)(void 0),o=Object(i.a)(a,2),r=o[0],l=o[1],u=Object(n.useState)(void 0),d=Object(i.a)(u,2),f=d[0],g=d[1];return Object(n.useEffect)((function(){g(void 0),l(void 0),t.scientificName&&s.a.get("https://en.wikipedia.org/w/api.php?action=query&origin=*&titles=".concat(t.scientificName,"&prop=extracts|info|pageimages&format=json&exintro=1&inprop=url&pithumbsize=250")).then((function(e){var t=Object.values(e.data.query.pages)[0];t.extract&&l(t.extract+'<p>Source: <a target="_blank" href="'.concat(t.fullurl,'">').concat(t.title,"</a> on Wikipedia</p?")),t.thumbnail&&g(t.thumbnail.source)})).catch((function(e){console.error(e)}))}),[t]),c.a.createElement("div",{className:"panel"},f&&c.a.createElement("img",{alt:t.scientificName,className:"pull-right",src:f}),c.a.createElement("h2",null,m()(t.formattedScientificName)),c.a.createElement("h4",null,"Common name: ",t.primaryCommonName),c.a.createElement("h4",null,"Family: ",t.speciesGlobal.family),t.speciesGlobal.otherCommonNames&&t.speciesGlobal.otherCommonNames.length>0&&c.a.createElement("div",null,c.a.createElement("b",null,"Other common names:"),c.a.createElement("ul",null,t.speciesGlobal.otherCommonNames.map((function(e,t){return c.a.createElement("li",{key:t},e)})))),t.speciesGlobal.informalTaxonomy&&c.a.createElement("div",null,c.a.createElement("b",null,"Informal taxonomy:")," ",t.speciesGlobal.informalTaxonomy),t.speciesGlobal.taxonomicComments&&c.a.createElement("div",null,c.a.createElement("b",null,"Comments:")," ",m()(t.speciesGlobal.taxonomicComments)),r&&c.a.createElement("div",null,m()(r),c.a.createElement(p,{data:t})))},g=function(e){var t=e.resultsSummary,a=e.setPage,o=(e.setRecordsPerPage,Object(n.useRef)(null));return Object(n.useEffect)((function(){o.current.value=t.page+1}),[t.page]),c.a.createElement("div",{className:"row"},c.a.createElement("button",{className:"pag-button",onClick:function(){return a(0)}},"<<"),c.a.createElement("button",{className:"pag-button",onClick:function(){return a(t.page-1)}},"<"),"Page ",c.a.createElement("input",{ref:o,className:"pag-input",type:"number",defaultValue:t.page+1,onBlur:function(e){return e.currentTarget.value&&function(e){var n=Math.floor(e.value)-1;n!==t.page&&n>=0&&n<t.totalPages?a(n):e.value=t.page+1}(e.currentTarget)}})," of ",t.totalPages,c.a.createElement("button",{className:"pag-button",onClick:function(){return a(t.page+1)}},">"),c.a.createElement("button",{className:"pag-button",onClick:function(){return a(t.totalPages-1)}},">>"))},b=function(){var e=Object(n.useState)("AL"),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(void 0),l=Object(i.a)(r,2),u=l[0],m=l[1],d=Object(n.useState)(0),p=Object(i.a)(d,2),b=p[0],E=p[1],v=Object(n.useState)(20),h=Object(i.a)(v,2),O=h[0],j=h[1];return Object(n.useEffect)((function(){s.a.post("https://explorer.natureserve.org/api/data/speciesSearch",{criteriaType:"species",pagingOptions:{page:b,recordsPerPage:O},locationCriteria:[{paramType:"subnation",subnation:a,nation:"US"}],speciesTaxonomyCriteria:[{paramType:"scientificTaxonomy",level:"KINGDOM",scientificTaxonomy:"Plantae"}]}).then((function(e){m(e.data),console.log(e)})).catch((function(e){console.error(e)}))}),[a,b,O]),c.a.createElement("div",null,c.a.createElement("h1",null,"State Search"),"API Provided by https://explorer.natureserve.org/",c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"six columns"},"Select a state:",c.a.createElement("select",{onChange:function(e){return o(e.currentTarget.value)}},["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MH","MA","MI","FM","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VA","VI","WA","WV","WI","WY"].map((function(e,t){return c.a.createElement("option",{key:e,value:e},e)}))),u&&c.a.createElement("p",null,"Total species found for ",a,": ",u.resultsSummary.speciesResults.total)),c.a.createElement("div",{className:"six columns pagination"},u&&u.resultsSummary&&c.a.createElement(g,{resultsSummary:u.resultsSummary,setPage:E,setRecordsPerPage:j}))),c.a.createElement("div",null,u&&u.results.map((function(e,t){return c.a.createElement(f,{key:t,data:e})}))))},E=function(e){var t=e.onLoad,a=e.linkPath,o=e.setState,r=Object(n.useState)(!1),l=Object(i.a)(r,2),s=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1];return c.a.createElement("div",{className:"center"},!s&&!p&&c.a.createElement("button",{disabled:s,onClick:function(){return u(!0),void t(a,o,(function(){u(!1),f(!0)}))}},"Load Children"))},v=function(e){var t=e.type,a=e.onLoad,o=e.data,r=e.setState,l=Object(n.useState)(void 0),u=Object(i.a)(l,2),d=u[0],p=u[1],f=Object(n.useState)(!1),g=Object(i.a)(f,2),b=g[0],v=g[1],h=Object(n.useState)(void 0),O=Object(i.a)(h,2),j=O[0],k=O[1];return Object(n.useEffect)((function(){v(!0),o.slug&&s.a.get("https://en.wikipedia.org/w/api.php?action=query&origin=*&titles=".concat(o.slug,"&prop=extracts&format=json&exintro=1")).then((function(e){var t=Object.values(e.data.query.pages)[0].extract;p(t||'<p class="center">No description found</p>'),v(!1)})).catch((function(e){console.error(e),v(!1)}))}),[]),Object(n.useEffect)((function(){o.slug&&s.a.get("https://en.wikipedia.org/w/api.php?action=query&origin=*&titles=".concat(o.slug,"&prop=pageimages&format=json&pithumbsize=250")).then((function(e){var t=Object.values(e.data.query.pages)[0].thumbnail;t&&k(t.source)})).catch((function(e){console.error(e)}))}),[]),c.a.createElement("div",{className:"panel"},c.a.createElement("h4",{className:"center"},t,": ",o.name),c.a.createElement("div",null,j&&c.a.createElement("img",{className:"pull-right",src:j}),b?c.a.createElement("p",null,"Loading additional information..."):m()(d)),c.a.createElement(E,{onLoad:a,linkPath:o.link,setState:r}))},h=function(e){var t=e.data,a=e.onLoad,o=Object(n.useState)(t),r=Object(i.a)(o,2),l=r[0],s=r[1];return c.a.createElement("div",null,c.a.createElement(v,{type:"Genus",onLoad:a,data:l,setState:s}))},O=function(e){var t=e.data,a=e.onLoad,o=Object(n.useState)(t),r=Object(i.a)(o,2),l=r[0],s=r[1],u=Object(n.useState)(l.genuses),m=Object(i.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){l.genuses&&p(l.genuses)}),[l]),c.a.createElement("div",null,c.a.createElement(v,{type:"Family",onLoad:a,data:l,setState:s}),c.a.createElement("div",{className:"margin-left"},d&&d.map((function(e,t){return c.a.createElement(h,{key:t,onLoad:a,data:e})}))))},j=function(e){var t=e.data,a=e.onLoad,o=Object(n.useState)(t),r=Object(i.a)(o,2),l=r[0],s=r[1],u=Object(n.useState)(l.families),m=Object(i.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){l.families&&p(l.families)}),[l]),c.a.createElement("div",null,c.a.createElement(v,{type:"Division Order",onLoad:a,data:l,setState:s}),c.a.createElement("div",{className:"margin-left"},d&&d.map((function(e,t){return c.a.createElement(O,{key:t,onLoad:a,data:e})}))))},k=function(e){var t=e.data,a=e.onLoad,o=Object(n.useState)(t),r=Object(i.a)(o,2),l=r[0],s=r[1],u=Object(n.useState)(l.division_orders),m=Object(i.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){l.division_orders&&p(l.division_orders)}),[l]),c.a.createElement("div",null,c.a.createElement(v,{type:"Division Class",onLoad:a,data:l,setState:s}),c.a.createElement("div",{className:"margin-left"},d&&d.map((function(e,t){return c.a.createElement(j,{key:t,onLoad:a,data:e})}))))},S=function(e){var t=e.data,a=e.onLoad,o=Object(n.useState)(t),r=Object(i.a)(o,2),l=r[0],s=r[1],u=Object(n.useState)(l.division_classes),m=Object(i.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){l.division_classes&&p(l.division_classes)}),[l]),c.a.createElement("div",null,c.a.createElement(v,{type:"Division",onLoad:a,data:l,setState:s}),c.a.createElement("div",{className:"margin-left"},d&&d.map((function(e,t){return c.a.createElement(k,{key:t,onLoad:a,data:e})}))))},N=function(e){var t=e.data,a=e.onLoad,o=Object(n.useState)(t),r=Object(i.a)(o,2),l=r[0],s=r[1],u=Object(n.useState)([]),m=Object(i.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){l.divisions&&p(l.divisions)}),[l]),c.a.createElement("div",null,c.a.createElement(v,{type:"Subkingdom",onLoad:a,data:l,setState:s}),c.a.createElement("div",{className:"margin-left"},d&&d.map((function(e,t){return c.a.createElement(S,{key:t,data:e,onLoad:a})}))))},y=function(e){var t=e.data,a=e.onLoad,o=Object(n.useState)([]),r=Object(i.a)(o,2),l=r[0],s=r[1];return Object(n.useEffect)((function(){t.subkingdoms&&s(t.subkingdoms)}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"panel"},c.a.createElement("h2",{className:"center"},"Kingdom: ",t.name)),c.a.createElement("div",{className:"margin-left"},l&&l.map((function(e,t){return c.a.createElement(N,{onLoad:a,key:t,data:e})}))))},w="https://us-central1-trefle-api-token.cloudfunctions.net/tokenGET",L=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(void 0),l=Object(i.a)(r,2),u=l[0],m=l[1];Object(n.useEffect)((function(){s.a.get(w).then((function(e){m(e.data.token)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){u&&d("https://trefle.io/api/kingdoms",o)}),[u]);var d=function(e,t,a){s.a.get("".concat(e.replace("http:","https:"),"?token=").concat(u)).then((function(e){t(e.data),a&&a()})).catch((function(e){console.error(e),a&&a()}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Kingdom Tree"),a&&a.map((function(e,t){return c.a.createElement(y,{key:t,data:e,onLoad:d})})))},C=function(){return c.a.createElement("div",null,"This project is for messing around with plant web APIs")},P=a(12),x=a(2),T=function(){return c.a.createElement(P.a,null,c.a.createElement("div",null,c.a.createElement("nav",{className:"menu navbar pure-menu pure-menu-horizontal header-margin-bottom"},c.a.createElement(P.b,{className:"menu-link pure-menu-heading pure-menu-link",to:"/"},c.a.createElement("img",{alt:"logo",className:"logo",src:"https://freesvg.org/img/eco_spadassin_green_leaf_2_icon.png"})),c.a.createElement(P.b,{className:"menu-link pure-menu-heading pure-menu-link",to:"/kingdom"},"Plant Kingdom"),c.a.createElement(P.b,{className:"menu-link pure-menu-heading pure-menu-link",to:"/world"},"World Search")),c.a.createElement("ul",{className:"header header-style"}),c.a.createElement("div",{className:"content container"},c.a.createElement(x.a,{exact:!0,path:"/",component:C}),c.a.createElement(x.a,{exact:!0,path:"/kingdom",component:L}),c.a.createElement(x.a,{exact:!0,path:"/world",component:b}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,a){e.exports=a(117)},53:function(e,t,a){},95:function(e,t){}},[[48,1,2]]]);
//# sourceMappingURL=main.bcc34567.chunk.js.map